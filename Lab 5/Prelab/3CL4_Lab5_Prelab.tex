\documentclass[12pt]{article}
\usepackage[letterpaper, margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{subcaption}
\graphicspath{{./Figures/}}
\usepackage{hyperref}
\usepackage{parskip}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{enumitem}
\usepackage{gensymb}
% \allowdisplaybreaks

\title{ELECENG 3CL4 Lab 5 Pre-lab}
\author{
    Aaron Pinto \\
    pintoa9 \\
    L02
    \and
    Raeed Hassan \\
    hassam41 \\
    L02
}

\begin{document}

\maketitle
\clearpage

\begin{enumerate}
	\item %1
	The output of the model can be expressed as:
	\begin{multline} \label{eq:model}
        Y(s) = \frac{G_c(s)G(s)}{1+H(s)G_c(s)G(s)}R(s) + \frac{G(s)}{1+H(s)G_c(s)G(s)}T_d(s) \\ + \frac{H(s)G_c(s)G(s)}{1+H(s)G_c(s)G(s)}N(s)
    \end{multline}
	
	From Equation~\ref{eq:model}, we can derive $\frac{Y(s)}{T_d(s)}$ in Equation~\ref{eq:1} when $R(s) = 0$ and $H(s) = 1$.

	\begin{equation} \label{eq:1}
	\begin{aligned}[b]
		Y(s) &= \frac{G(s)}{1+H(s)G_c(s)G(s)}T_d(s) \\
		\frac{Y(s)}{T_d(s)} &= \frac{G(s)}{1+H(s)G_c(s)G(s)} \\
		&= \frac{G(s)}{1+G_c(s)G(s)}
	\end{aligned}
	\end{equation}

	\item %2
	The steady-state value of the output with a step disturbance of size $A$ and the absence of any input can be derived through the final value theorem as:
	\begin{equation} \label{eq:2}
	\begin{aligned}[b]
		e_{ss} &= \lim_{s \to 0} s \frac{G(s)}{1+G_c(s)G(s)} \frac{A}{s} \\
		&= \lim_{s \to 0} \frac{AG(s)}{1+G_c(s)G(s)} \\
		&= \lim_{s \to 0} \frac{A \frac{4.7}{s(s+3.2)}}{1 + G_c(s) \frac{4.7}{s(s+3.2)}} \\
		&= \lim_{s \to 0} \frac{4.7 A}{s(s+3.2) + 4.7 G_c(s)} \\
		&= 4.7 A \lim_{s \to 0} \frac{1}{s(s+3.2) + 4.7 G_c(s)} \\
		&= 4.7 A \frac{1}{\lim_{s \to 0}\left( s(s+1) \right) + \lim_{s \to 0}(4.7G_c(s))} \\
		&= 4.7 A \frac{1}{0 + 4.7 \lim_{s \to 0}\left(G_c(s)\right)} \\
		&= \frac{4.7 A}{4.7 \lim_{s \to 0}\left(G_c(s)\right)} \\
		&= \frac{A}{\lim_{s \to 0}G_c(s)}
	\end{aligned}
	\end{equation}
	
	\item %3
	We can write the expression in Equation~\ref{eq:2} for the case of a lead compensator, expressing it as a function of $K_c$, $z_{lead}$, and $p_{lead}$ in Equation~\ref{eq:3}.
	\begin{equation} \label{eq:3}
	\begin{aligned}[b]
		&= \frac{A}{\lim_{s \to 0}G_c(s)} \\
		&= \frac{A}{\lim_{s \to 0} \left( K_c \frac{(s+z_{lead})}{(s+p_{lead})} \right)} \\
		&= \frac{A}{K_c \left( \frac{z_{lead}}{p_{lead}} \right)} \\
		&= \frac{A}{K_c} \left( \frac{p_{lead}}{z_{lead}} \right)
	\end{aligned}
	\end{equation}
	
	\item %4
	We can write the expression in Equation~\ref{eq:2} for the case of a lead-lag compensator, expressing it as a function of $K_c$, $z_{lead}$, $p_{lead}$, $z_{lag}$, and $p_{lag}$ in Equation~\ref{eq:4}.
	\begin{equation} \label{eq:4}
		\begin{aligned}[b]
			&= \frac{A}{\lim_{s \to 0}G_c(s)} \\
			&= \frac{A}{\lim_{s \to 0} \left( K_c \frac{(s+z_{lead})}{(s+p_{lead})} \frac{(s+z_{lag})}{(s+p_{lag})} \right)} \\
			&= \frac{A}{K_c \left ( \frac{z_{lead}}{p_{lead}} \right) \left( \frac{z_{lag}}{p_{lag}} \right)} \\
			&= \frac{A}{K_c} \left( \frac{p_{lead}}{z_{lead}} \right) \left( \frac{p_{lag}}{z_{lag}} \right)
		\end{aligned}
		\end{equation}
	
	\item %5
	The parameters $K_c$, $z_{lead}$, and $p_{lead}$ were determined for a phase lead compensator in the pre-lab exercise of Lab 4 and were determined to be $K_c = 62.1$, $z_{lead} = 6$, and $p_{lead} = 15.51$.
	
	\item %6
	When the controller is used, the steady state value can be expressed as:
	\begin{equation} \label{eq:6}
	\begin{aligned}[b]
		e_{ss} &= \frac{A}{K_c} \left( \frac{p_{lead}}{z_{lead}} \right) \left( \frac{p_{lag}}{z_{lag}} \right) \\
		&= \frac{15.51 A}{62.1 \cdot 6} \left( \frac{p_{lag}}{z_{lag}} \right) \\
		&= A \frac{15.51}{372.6} \left( \frac{p_{lag}}{z_{lag}} \right)
	\end{aligned}
	\end{equation}

	\item %7
	If we want to change the steady-state response due to a step disturbance from the response when just the lead compensator is used, we can change the values of $z_{lag}$ and $p_{lag}$. We can see in Equation~\ref{eq:6} that the steady-state value is multiplied by $\frac{p_{lag}}{z_{lag}}$ when the lag compensator is introduced, therefore to reduce the steady-state response by five times, we need $\frac{p_{lag}}{z_{lag}}$ to equal $0.2$, or $p_{lag} = 0.2 z_{lag}$.

	\item %8
	The positions of the closed-loop poles of the lead compensated loop in the pre-lab exercise for Lab 4 were closed-loop poles at $-6 + 15j$ and $-6 - 15j$.
	
	\item %9
	We can choose values of $z_{lag}$ and $p_{lag}$ that are near the origin. This would not affect the transient performance of the closed loop very much as the transient responses of the zero and pole would decay very quickly. 
	
	\item %10
	
\end{enumerate}

\end{document}
